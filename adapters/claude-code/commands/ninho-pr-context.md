---
name: ninho:pr-context
description: (Optional) Manually generate PR context
---

# Generate PR Context (Manual Override)

**Note:** When Ninho detects `gh pr create`, it automatically:
1. Links your branch to the relevant PRD
2. Adds the PR to the PRD's Pull Requests table
3. Logs the PR context

This command is only needed if you want to:
- View the generated context before creating a PR
- Copy the context for use in an external PR tool
- Regenerate context after manually updating requirements

Generates rich context from PRDs to include in pull request descriptions, helping reviewers understand the "why" behind changes.

## Instructions

1. **Get current branch** and find linked PRD from `.ninho/pr-mappings.json`

2. **If no mapping exists**, run `/ninho:link-pr` first

3. **Read the PRD** and extract:
   - Linked requirements
   - Related decisions (from Decisions table)
   - Relevant constraints
   - Related files

4. **Generate markdown** for PR description

5. **Output the context** for user to copy or offer to create PR directly

## Output Format

```markdown
## Context from PRD

**Feature**: Auth System ([PRD](.ninho/prds/auth-system.md))

### Requirements Addressed
- [x] Login with email/password
- [x] Session management

### Decisions Made
| Decision | Rationale |
|----------|-----------|
| Use JWT tokens | Stateless, scales horizontally ([context](.ninho/prompts/2026-02-16.md#L12)) |
| 24h token expiry | Balance security vs UX ([context](.ninho/prompts/2026-02-16.md#L45)) |

### Constraints Considered
- Must support SSO in future
- Session timeout: 24 hours

### Related Discussion
- Discussed OAuth options, deferred to Phase 2
- Evaluated session vs JWT, chose JWT for horizontal scaling

---
*Generated by [Ninho](https://ninho.ai) - AI coding context management*
```

## Example Interaction

```
> /ninho:pr-context

Generating PR context for: feat/jwt-auth
Linked PRD: auth-system

## Context from PRD

**Feature**: Auth System ([PRD](.ninho/prds/auth-system.md))

### Requirements Addressed
- [x] Login with email/password

### Decisions Made
| Decision | Rationale |
|----------|-----------|
| Use JWT tokens | Stateless, scales horizontally |

---

Options:
1. Copy to clipboard
2. Create PR with this context: gh pr create
3. Edit before using
```

## If Creating PR Directly

```
> /ninho:pr-context --create

Creating PR with context...

Title: feat: Add JWT authentication

Body includes PRD context.

PR created: https://github.com/org/repo/pull/42

✅ Updated auth-system.md Pull Requests table
```

## No Linked Requirements

If branch has no linked requirements:

```
> /ninho:pr-context

⚠️  No requirements linked to this branch.

Run /ninho:link-pr first to connect this branch to PRD requirements.
```
